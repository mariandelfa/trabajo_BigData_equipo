{
  "hash": "fa5c8a47dbb593ec52e455034b884a67",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Evolución Demográfica en España\"\ndescription: |\n  Análisis visual de los datos de población recientes utilizando R y ggplot2.\nauthor:    \n  - Marian Delfa Baena (madelba2@alumni.uv.es)   \n  - Abel Guarinos Marin\n  - Xavier Vidal Roselló\ndate: 2025-12-06\ncategories: [trabajo BigData, demografia, ggplot2]\nimage: \"./imagenes/imagen_01.png\"\n\n# --- CONFIGURACIÓN DE ESTILO Y FUENTES ---\ntheme: cosmo                        \nmainfont: \"Verdana\"                 \nmonofont: \"Fira Code\"               \nbackgroundcolor: \"#FCFCFC\"          \nfontcolor: \"#333333\"                \ntitle-block-banner: true \ntitle-block-banner-color: \"#B22222\" \ntoc: true\ntoc-title: \"Índice de contenidos\"\ntoc-depth: 3\nsmooth-scroll: true\n\nformat: \n  html:\n    link-external-newwindow: true\n    code-tools: true\n    code-link: true\n    code-fold: show                 \n    highlight-style: a11y         \n---\n\n## 0. Introducción\n\nVamos a utilizar datos demográficos básicos de España. En este trabajo queremos evaluar como generación a generación han ido cambiando las tendencias y el crecimiento poblacional. Para esto utilizaremos gráficos lineales, tablas y finalmente una pirámide.\n\n------------------------------------------------------------------------\n\n## 1. Propensión del crecimiento\n\nEl objetivo de este apartado es analizar si la tendencia poblacional es positiva o negativa dependiendo si aumenta o disminuye, desde el 2019 al 2023.\n\n\n::: {.cell layout-align=\"center\"}\n\n:::\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndf_spain <- df_limpio %>%\n  mutate(año = year(time)) %>%\n  filter(\n    geo == \"ES\",        # España\n    sex == \"T\",         # Total\n    age == \"TOTAL\",     # Total edad\n    año >= 2019 & año <= 2023\n  ) %>%\n  select(año, poblacion_total = values) %>%\n  arrange(año) %>%\n  mutate(\n    diferencia = poblacion_total - lag(poblacion_total),\n    tendencia = ifelse(diferencia >= 0, \"Positiva\", \"Negativa\")\n  )\n\nkable(df_spain, caption = \"Tabla: Datos Eurostat\")\n```\n\n::: {.cell-output-display}\n\n\nTable: Tabla: Datos Eurostat\n\n|  año| poblacion_total| diferencia|tendencia |\n|----:|---------------:|----------:|:---------|\n| 2019|        46918951|         NA|NA        |\n| 2020|        47318050|     399099|Positiva  |\n| 2021|        47400798|      82748|Positiva  |\n| 2022|        47486843|      86045|Positiva  |\n| 2023|        48085361|     598518|Positiva  |\n\n\n:::\n:::\n\n\nPodemos decir que en todos los años la tendencia de crecimiento ha sido positiva, aunque en 2021 y 2022 debido al COVID-19 la diferencia no es tan notable. Además, en el cuarto apartado profundizamos acerca de la evolución demográfica en tres comunidades autónomas.\n\n------------------------------------------------------------------------\n\n## 2. Gráfico de la población total\n\nA continuación, generamos un gráfico de líneas sobre la evolución demográfica.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nggplot(data = df_spain, aes(x = año, y = poblacion_total)) +\n  # Línea de tendencia en color rojo \n  geom_line(color = \"#B22222\", linewidth = 1.2) + \n  # Puntos destacados en azul \n  geom_point(size = 4, color = \"#2C3E50\") +\n  # Etiquetas de texto con la cifra \n  geom_text(aes(label = round(poblacion_total / 1000000, 2)), \n            vjust = -1, size = 3.5, color = \"#555555\") +\n  # Ajustes de escalas\n  scale_y_continuous(labels = scales::comma, limits = c(46000000, 49000000)) +\n  scale_x_continuous(breaks = df_spain$año) +\n  theme_minimal() +\n  # Títulos y descripción\n  labs(\n    title = \"Evolución de la población Española\",\n    subtitle = \"Cifras en millones de habitantes\",\n    x = \"Año\",\n    y = \"Población total\",\n    caption = \"Fuente: Elaboración propia basado en los datos de Eurostat\"\n  ) +\n  theme(\n    plot.title = element_text(face = \"bold\", size = 16, color = \"#2C3E50\"),\n    plot.subtitle = element_text(face = \"italic\", color = \"#666666\"),\n    panel.grid.minor = element_blank() \n  )\n```\n\n::: {.cell-output-display}\n![](our_trabajo_BigData_files/figure-html/grafico-poblacion-1.png){fig-align='center' width=95%}\n:::\n:::\n\n\nObservamos en el gráfico que la evolución es basatante constante, hasta que en 2022 a 2023 se muestra un crecimiento más considerable superando los 48 millones.\n\n------------------------------------------------------------------------\n\n## 3. Contexto Geográfico\n\nEsta imagen muestra cómo la población se concentra en las costas y en Madrid, dejando el interior mucho más vacío.\n\n\n::: {.cell layout-align=\"center\"}\n\n:::\n\n\n![Mapa densidad de España](https://tse1.mm.bing.net/th/id/OIP.F0wIgaazuGD47jt4RcAyBQHaGD?cb=ucfimg2&ucfimg=1&rs=1&pid=ImgDetMain&o=7&rm=3)\n\n------------------------------------------------------------------------\n\nIncluso podemos ver la comparación de la densidad con el año 2021\n\n::: column-margin\n![](./imagenes/imagen_02.png){fig-align=\"center\"}\n:::\n\n------------------------------------------------------------------------\n\n## 4. Gráficos del análisis\n\nSon tres gráficos de evolución demográfica en las comunidades autónomas más representativas de España.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlibrary(scales) # Para las comas en los números :)\n\n# Si por seguridad quieres asegurarte de que existe:\nif (!exists(\"df_limpio\")) {\n   # (Solo se ejecuta si saltaste el bloque 1)\n   raw <- get_eurostat(\"demo_r_d2jan\")\n   df_limpio <- raw %>% rename_with(~ \"time\", any_of(\"TIME_PERIOD\"))\n}\n\ndf_ccaa <- df_limpio %>%\n  mutate(año = year(time)) %>%\n  filter(\n    geo %in% c(\"ES30\", \"ES43\", \"ES52\"), # Madrid, Extremadura, Valencia\n    sex == \"T\",\n    age == \"TOTAL\",\n    año >= 2019 & año <= 2023\n  ) %>%\n  mutate(Comunidad = case_when(\n    geo == \"ES30\" ~ \"Madrid\",\n    geo == \"ES43\" ~ \"Extremadura\",\n    geo == \"ES52\" ~ \"C. Valenciana\"\n  ))\n\nggplot(df_ccaa, aes(x = año, y = values, color = Comunidad)) +\n  geom_line(linewidth = 1) +      \n  geom_point(size = 3) +                             \n  facet_wrap(~Comunidad, scales = \"free_y\") +      \n  theme_minimal() +  \n  scale_y_continuous(labels = label_comma()) +\n  scale_x_continuous(breaks = 2019:2023) +\n  labs(title = \"Evolución por Comunidad Autónoma\", y = \"Habitantes\") +\n  theme(legend.position = \"none\")\n```\n\n::: {.cell-output-display}\n![](our_trabajo_BigData_files/figure-html/grafico-comunidades-1.png){fig-align='center' width=95%}\n:::\n:::\n\n\n------------------------------------------------------------------------\n\n## 5. Pirámide poblacional\n\nEspaña sufre un proceso de envejecimiento demográfico. Podemos ver que la base de la pirámide (niños) es más estrecha que la parte superior(personas mayores).\n\nSeguidamente, creamos la pirámide poblacional.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# 1. Data frame de la estructura piramidal de España (Hombres negativo, Mujeres positivo)\ndf_piramide <- data.frame(\n  grupo_edad = factor(rep(c(\"0-14\", \"15-29\", \"30-44\", \"45-59\", \"60-74\", \"75+\"), 2),\n                      levels = c(\"0-14\", \"15-29\", \"30-44\", \"45-59\", \"60-74\", \"75+\")),\n  sexo = c(rep(\"Hombres\", 6), rep(\"Mujeres\", 6)),\n  poblacion = c(\n    -3.2, -3.8, -5.0, -5.8, -4.1, -2.1,  # Hombres (negativo)\n     3.0,  3.6,  4.9,  5.9,  4.5,  3.2   # Mujeres (positivo)\n  )\n)\n\n# 2. Pirámide\nggplot(df_piramide, aes(x = grupo_edad, y = poblacion, fill = sexo)) +\n  geom_col() +                       \n  coord_flip() +                     \n  scale_y_continuous(labels = abs) + \n  theme_minimal() +\n  labs(\n    title = \"Pirámide poblacional de España\",\n    subtitle = \"Pirámide seprada en dos géneros y en grupos de edades\",\n    x = \"Grupo de edad\",\n    y = \"Población relativa (Millones)\",\n    fill = \"\"\n  )\n```\n\n::: {.cell-output-display}\n![](our_trabajo_BigData_files/figure-html/piramide-poblacion-1.png){fig-align='center' width=95%}\n:::\n:::\n\n\nContemplamos claramente la forma de urna. Los grupos de edad de 45 a 59 años por el \"Baby boom\" son mucho más numerosos que el grupo de los niños (0-14), lo que confirma la inversión de la pirámide. España presenta un problema de población envejecida y aumentará en el futuro debido a la baja natalidad.\n\n------------------------------------------------------------------------\n\n<br>\n\nCon esto acabamos nuestro trabajo para BigData!!\n\n<br>\n\n------------------------------------------------------------------------\n\n<br>\n\n### Información sobre la sesión\n\nAbajo muestro mi entorno de trabajo y paquetes utilizados\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n<details closed>\n<summary> <span title='Click to Expand'> current session info </span> </summary>\n\n```r\n\n─ Session info ───────────────────────────────────────────────────────────────\n setting  value\n version  R version 4.5.1 (2025-06-13 ucrt)\n os       Windows 11 x64 (build 26200)\n system   x86_64, mingw32\n ui       RTerm\n language (EN)\n collate  Catalan_Spain.utf8\n ctype    Catalan_Spain.utf8\n tz       Europe/Madrid\n date     2025-12-12\n pandoc   3.6.3 @ C:/Program Files/RStudio/resources/app/bin/quarto/bin/tools/ (via rmarkdown)\n quarto   NA @ C:\\\\Users\\\\abelg\\\\AppData\\\\Local\\\\Programs\\\\Quarto\\\\bin\\\\quarto.exe\n\n─ Packages ───────────────────────────────────────────────────────────────────\n package      * version date (UTC) lib source\n assertthat     0.2.1   2019-03-21 [1] CRAN (R 4.5.1)\n backports      1.5.0   2024-05-23 [1] CRAN (R 4.5.0)\n bibtex         0.5.1   2023-01-26 [1] CRAN (R 4.5.1)\n bit            4.6.0   2025-03-06 [1] CRAN (R 4.5.1)\n bit64          4.6.0-1 2025-01-16 [1] CRAN (R 4.5.1)\n cellranger     1.1.0   2016-07-27 [1] CRAN (R 4.5.1)\n class          7.3-23  2025-01-01 [2] CRAN (R 4.5.1)\n classInt       0.4-11  2025-01-08 [1] CRAN (R 4.5.1)\n cli            3.6.5   2025-04-23 [1] CRAN (R 4.5.1)\n clipr          0.8.0   2022-02-22 [1] CRAN (R 4.5.1)\n countrycode    1.6.1   2025-03-31 [1] CRAN (R 4.5.1)\n crayon         1.5.3   2024-06-20 [1] CRAN (R 4.5.1)\n curl           7.0.0   2025-08-19 [1] CRAN (R 4.5.1)\n data.table     1.17.8  2025-07-10 [1] CRAN (R 4.5.1)\n desc           1.4.3   2023-12-10 [1] CRAN (R 4.5.2)\n details        0.4.0   2025-02-09 [1] CRAN (R 4.5.2)\n digest         0.6.37  2024-08-19 [1] CRAN (R 4.5.1)\n dplyr        * 1.1.4   2023-11-17 [1] CRAN (R 4.5.1)\n e1071          1.7-16  2024-09-16 [1] CRAN (R 4.5.1)\n eurostat     * 4.0.0   2023-12-19 [1] CRAN (R 4.5.2)\n evaluate       1.0.5   2025-08-27 [1] CRAN (R 4.5.1)\n farver         2.1.2   2024-05-13 [1] CRAN (R 4.5.1)\n fastmap        1.2.0   2024-05-15 [1] CRAN (R 4.5.1)\n generics       0.1.4   2025-05-09 [1] CRAN (R 4.5.1)\n ggplot2      * 4.0.0   2025-09-11 [1] CRAN (R 4.5.1)\n glue           1.8.0   2024-09-30 [1] CRAN (R 4.5.1)\n gtable         0.3.6   2024-10-25 [1] CRAN (R 4.5.1)\n here           1.0.2   2025-09-15 [1] CRAN (R 4.5.1)\n hms            1.1.3   2023-03-21 [1] CRAN (R 4.5.1)\n htmltools      0.5.8.1 2024-04-04 [1] CRAN (R 4.5.1)\n htmlwidgets    1.6.4   2023-12-06 [1] CRAN (R 4.5.1)\n httr           1.4.7   2023-08-15 [1] CRAN (R 4.5.1)\n httr2          1.2.1   2025-07-22 [1] CRAN (R 4.5.1)\n ISOweek        0.6-2   2011-09-07 [1] CRAN (R 4.5.1)\n jsonlite       2.0.0   2025-03-27 [1] CRAN (R 4.5.1)\n KernSmooth     2.23-26 2025-01-01 [2] CRAN (R 4.5.1)\n knitr        * 1.50    2025-03-16 [1] CRAN (R 4.5.1)\n labeling       0.4.3   2023-08-29 [1] CRAN (R 4.5.0)\n lifecycle      1.0.4   2023-11-07 [1] CRAN (R 4.5.1)\n lubridate    * 1.9.4   2024-12-08 [1] CRAN (R 4.5.1)\n magrittr       2.0.4   2025-09-12 [1] CRAN (R 4.5.1)\n pillar         1.11.1  2025-09-17 [1] CRAN (R 4.5.1)\n pkgconfig      2.0.3   2019-09-22 [1] CRAN (R 4.5.1)\n plyr           1.8.9   2023-10-02 [1] CRAN (R 4.5.1)\n png            0.1-8   2022-11-29 [1] CRAN (R 4.5.0)\n proxy          0.4-27  2022-06-09 [1] CRAN (R 4.5.1)\n purrr          1.1.0   2025-07-10 [1] CRAN (R 4.5.1)\n R6             2.6.1   2025-02-15 [1] CRAN (R 4.5.1)\n rappdirs       0.3.3   2021-01-31 [1] CRAN (R 4.5.1)\n RColorBrewer   1.1-3   2022-04-03 [1] CRAN (R 4.5.0)\n Rcpp           1.1.0   2025-07-02 [1] CRAN (R 4.5.1)\n readr          2.1.5   2024-01-10 [1] CRAN (R 4.5.1)\n readxl         1.4.5   2025-03-07 [1] CRAN (R 4.5.1)\n RefManageR     1.4.0   2022-09-30 [1] CRAN (R 4.5.1)\n regions        0.1.8   2021-06-21 [1] CRAN (R 4.5.1)\n rlang          1.1.6   2025-04-11 [1] CRAN (R 4.5.1)\n rmarkdown      2.29    2024-11-04 [1] CRAN (R 4.5.1)\n rprojroot      2.1.1   2025-08-26 [1] CRAN (R 4.5.1)\n rstudioapi     0.17.1  2024-10-22 [1] CRAN (R 4.5.1)\n S7             0.2.0   2024-11-07 [1] CRAN (R 4.5.1)\n scales       * 1.4.0   2025-04-24 [1] CRAN (R 4.5.1)\n sessioninfo    1.2.3   2025-02-05 [1] CRAN (R 4.5.2)\n stringi        1.8.7   2025-03-27 [1] CRAN (R 4.5.0)\n stringr        1.5.2   2025-09-08 [1] CRAN (R 4.5.1)\n tibble         3.3.0   2025-06-08 [1] CRAN (R 4.5.1)\n tidyr          1.3.1   2024-01-24 [1] CRAN (R 4.5.1)\n tidyselect     1.2.1   2024-03-11 [1] CRAN (R 4.5.1)\n timechange     0.3.0   2024-01-18 [1] CRAN (R 4.5.1)\n tzdb           0.5.0   2025-03-15 [1] CRAN (R 4.5.1)\n vctrs          0.6.5   2023-12-01 [1] CRAN (R 4.5.1)\n vroom          1.6.6   2025-09-19 [1] CRAN (R 4.5.1)\n withr          3.0.2   2024-10-28 [1] CRAN (R 4.5.1)\n xfun           0.53    2025-08-19 [1] CRAN (R 4.5.1)\n xml2           1.4.0   2025-08-20 [1] CRAN (R 4.5.1)\n yaml           2.3.10  2024-07-26 [1] CRAN (R 4.5.0)\n\n [1] C:/Users/abelg/AppData/Local/R/win-library/4.5\n [2] C:/Program Files/R/R-4.5.1/library\n * ── Packages attached to the search path.\n\n──────────────────────────────────────────────────────────────────────────────\n\n```\n\n</details>\n<br>\n:::\n:::\n\n",
    "supporting": [
      "our_trabajo_BigData_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}