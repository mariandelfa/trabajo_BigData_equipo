{
  "hash": "90594cc2e7c647822fe5d08f64f56d52",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Evolución Demográfica en España\"\nauthor:     \n  - Marian Delfa Baena\n  - Abel Guarinos Marin\n  - Xavier Vidal Roselló\ndate: 2025-12-06                \ndate-format: short\nformat: \n  revealjs:\n    # --- AJUSTES VISUALES ---\n    theme: white                  \n    mainfont: \"Verdana\"           \n    monofont: \"Fira Code\"         \n    background-color: \"#FCFCFC\"   \n    fontcolor: \"#333333\"          \n    highlight-style: a11y       \n    \n    # ---PORTADA ---\n    center-title-slide: true\n    title-slide-attributes: \n      data-background-color: \"#B22222\"  \n      data-color: \"#FFFFFF\"             \n    \n    # ---PRESENTACIÓN---\n    scrollable: true\n    slide-level: 2\n    height: 900\n    width: 1600\n    toc: false\n    preview-links: auto \n    link-external-newwindow: true\n    transition: fade\n    code-line-numbers: true\n    number-sections: false\n    slide-number: c/t  \n    incremental: false   \nfooter: |\n  Evolución Demográfica en España - BigData\n---\n\n## Intro \n\nHemos usado para el análisis demográfico datos extraidos de Euroestat, el repo de Github está [aquí](https://github.com/mariandelfa/demoesp) y la página web del paquete está [aquí](https://mariandelfa.github.io/demoesp/).\n\nLos datos se pueden cargar en la memoria de de R/RStudio de esta forma:\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlibrary(ggplot2)\nlibrary(knitr)\nlibrary(dplyr)\nlibrary(eurostat) \nlibrary(lubridate)\n\ndf_eurostat_raw <- get_eurostat(\"demo_r_d2jan\")\n\ndf_limpio <- df_eurostat_raw %>%\n  rename_with(~ \"time\", any_of(\"TIME_PERIOD\")) %>%\n  rename_with(~ \"geo\", any_of(\"geo\")) \n```\n:::\n\n\n----------------------\n\n## 1. Propensión del crecimiento\n\nVamos a ver una tabla con el resultado de la tendencia poblacional desde el 2019 al 2023.\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndf_spain <- df_limpio %>%\n  mutate(año = year(time)) %>%\n  filter(\n    geo == \"ES\",        # España\n    sex == \"T\",         # Total\n    age == \"TOTAL\",     # Total edad\n    año >= 2019 & año <= 2023\n  ) %>%\n  select(año, poblacion_total = values) %>%\n  arrange(año) %>%\n  mutate(\n    diferencia = poblacion_total - lag(poblacion_total),\n    tendencia = ifelse(diferencia >= 0, \"Positiva\", \"Negativa\")\n  )\n\nkable(df_spain, caption = \"Tabla: Datos Eurostat\")\n```\n\n::: {.cell-output-display}\n\n\nTable: Tabla: Datos Eurostat\n\n|  año| poblacion_total| diferencia|tendencia |\n|----:|---------------:|----------:|:---------|\n| 2019|        46918951|         NA|NA        |\n| 2020|        47318050|     399099|Positiva  |\n| 2021|        47400798|      82748|Positiva  |\n| 2022|        47486843|      86045|Positiva  |\n| 2023|        48085361|     598518|Positiva  |\n\n\n:::\n:::\n\n\n------------------------------------------------------------------------\n\n## 2. Gráfico de la población total\n\nA continuación, generamos un gráfico de líneas sobre la evolución demográfica.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nggplot(data = df_spain, aes(x = año, y = poblacion_total)) +\n  # Línea de tendencia en color rojo \n  geom_line(color = \"#B22222\", linewidth = 1.2) + \n  # Puntos destacados en azul \n  geom_point(size = 4, color = \"#2C3E50\") +\n  # Etiquetas de texto con la cifra \n  geom_text(aes(label = round(poblacion_total / 1000000, 2)), \n            vjust = -1, size = 3.5, color = \"#555555\") +\n  # Ajustes de escalas\n  scale_y_continuous(labels = scales::comma, limits = c(46000000, 49000000)) +\n  scale_x_continuous(breaks = df_spain$año) +\n  theme_minimal() +\n  # Títulos y descripción\n  labs(\n    title = \"Evolución de la población Española\",\n    subtitle = \"Cifras en millones de habitantes\",\n    x = \"Año\",\n    y = \"Población total\",\n    caption = \"Fuente: Elaboración propia basado en los datos de Eurostat\"\n  ) +\n  theme(\n    plot.title = element_text(face = \"bold\", size = 16, color = \"#2C3E50\"),\n    plot.subtitle = element_text(face = \"italic\", color = \"#666666\"),\n    panel.grid.minor = element_blank() \n  )\n```\n\n::: {.cell-output-display}\n![](my_slides_BigData_files/figure-revealjs/grafico-poblacion-1.png){fig-align='center' width=95%}\n:::\n:::\n\n\n\n------------------------------------------------------------------------\n\n## 3. Contexto Geográfico\n\nEsta imagen muestra cómo la población se concentra en las costas y en Madrid, dejando el interior mucho más vacío.\n\n\n::: {.cell layout-align=\"center\"}\n\n:::\n\n\n![Mapa densidad de España](https://tse1.mm.bing.net/th/id/OIP.F0wIgaazuGD47jt4RcAyBQHaGD?cb=ucfimg2&ucfimg=1&rs=1&pid=ImgDetMain&o=7&rm=3)\n\n------------------------------------------------------------------------\n\nIncluso podemos ver la comparación de la densidad con el año 2021\n\n::: column-margin\n![](./imagenes/imagen_02.png){fig-align=\"center\"}\n:::\n\n------------------------------------------------------------------------\n\n## 4. Gráficos del análisis\n\nSon tres gráficos de evolución demográfica en las comunidades autónomas más representativas de España\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlibrary(scales) # Para las comas en los números :)\n\n# Si por seguridad quieres asegurarte de que existe:\nif (!exists(\"df_limpio\")) {\n   # (Solo se ejecuta si saltaste el bloque 1)\n   raw <- get_eurostat(\"demo_r_d2jan\")\n   df_limpio <- raw %>% rename_with(~ \"time\", any_of(\"TIME_PERIOD\"))\n}\n\ndf_ccaa <- df_limpio %>%\n  mutate(año = year(time)) %>%\n  filter(\n    geo %in% c(\"ES30\", \"ES43\", \"ES52\"), # Madrid, Extremadura, Valencia\n    sex == \"T\",\n    age == \"TOTAL\",\n    año >= 2019 & año <= 2023\n  ) %>%\n  mutate(Comunidad = case_when(\n    geo == \"ES30\" ~ \"Madrid\",\n    geo == \"ES43\" ~ \"Extremadura\",\n    geo == \"ES52\" ~ \"C. Valenciana\"\n  ))\n\nggplot(df_ccaa, aes(x = año, y = values, color = Comunidad)) +\n  geom_line(linewidth = 1) +      \n  geom_point(size = 3) +                             \n  facet_wrap(~Comunidad, scales = \"free_y\") +      \n  theme_minimal() +  \n  scale_y_continuous(labels = label_comma()) +\n  scale_x_continuous(breaks = 2019:2023) +\n  labs(title = \"Evolución por Comunidad Autónoma\", y = \"Habitantes\") +\n  theme(legend.position = \"none\")\n```\n\n::: {.cell-output-display}\n![](my_slides_BigData_files/figure-revealjs/grafico-comunidades-1.png){fig-align='center' width=95%}\n:::\n:::\n\n\n---------\n\n## 5. Pirámide poblacional\n\nSeguidamente, creamos la pirámide poblacional.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# 1. Data frame de la estructura piramidal de España (Hombres negativo, Mujeres positivo)\ndf_piramide <- data.frame(\n  grupo_edad = factor(rep(c(\"0-14\", \"15-29\", \"30-44\", \"45-59\", \"60-74\", \"75+\"), 2),\n                      levels = c(\"0-14\", \"15-29\", \"30-44\", \"45-59\", \"60-74\", \"75+\")),\n  sexo = c(rep(\"Hombres\", 6), rep(\"Mujeres\", 6)),\n  poblacion = c(\n    -3.2, -3.8, -5.0, -5.8, -4.1, -2.1,  # Hombres (negativo)\n     3.0,  3.6,  4.9,  5.9,  4.5,  3.2   # Mujeres (positivo)\n  )\n)\n\n# 2. Pirámide\nggplot(df_piramide, aes(x = grupo_edad, y = poblacion, fill = sexo)) +\n  geom_col() +                       \n  coord_flip() +                     \n  scale_y_continuous(labels = abs) + \n  theme_minimal() +\n  labs(\n    title = \"Pirámide poblacional de España\",\n    subtitle = \"Pirámide seprada en dos géneros y en grupos de edades\",\n    x = \"Grupo de edad\",\n    y = \"Población relativa (Millones)\",\n    fill = \"\"\n  )\n```\n\n::: {.cell-output-display}\n![](my_slides_BigData_files/figure-revealjs/piramide-poblacion-1.png){fig-align='center' width=95%}\n:::\n:::\n\n\n",
    "supporting": [
      "my_slides_BigData_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}